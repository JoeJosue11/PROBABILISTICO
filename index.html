<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predictor de Supervivencia - Titanic</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f7ff;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            background-image: linear-gradient(to bottom, #e6f2ff, #cce0ff);
        }
        
        .container {
            max-width: 1100px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 100, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(to right, #0a2463, #1e3c8c);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            padding: 0;
        }
        
        .input-section {
            flex: 1;
            min-width: 300px;
            padding: 30px;
            background-color: #f9fbff;
            border-right: 1px solid #e0eaff;
        }
        
        .results-section {
            flex: 1;
            min-width: 300px;
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #0a2463;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #cce0ff;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #1e3c8c;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }
        
        .slider-value {
            margin-left: 15px;
            font-weight: 600;
            color: #1e3c8c;
            min-width: 40px;
        }
        
        button {
            background: linear-gradient(to right, #1e3c8c, #3a5fc9);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        button:hover {
            background: linear-gradient(to right, #0a2463, #1e3c8c);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 60, 140, 0.3);
        }
        
        .result-box {
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .survived {
            background-color: #e6f7e9;
            border-left: 5px solid #4CAF50;
        }
        
        .not-survived {
            background-color: #ffe6e6;
            border-left: 5px solid #f44336;
        }
        
        .result-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .probability {
            font-size: 3.5rem;
            font-weight: 800;
            margin: 20px 0;
        }
        
        .survived .probability {
            color: #2e7d32;
        }
        
        .not-survived .probability {
            color: #c62828;
        }
        
        .confidence {
            font-size: 1.1rem;
            color: #666;
            margin-top: 15px;
        }
        
        .factors {
            background-color: #f9fbff;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .factors h3 {
            margin-bottom: 15px;
            color: #0a2463;
        }
        
        .factor {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e0eaff;
        }
        
        .factor:last-child {
            border-bottom: none;
        }
        
        .factor-name {
            font-weight: 600;
        }
        
        .factor-impact {
            color: #1e3c8c;
        }
        
        .positive {
            color: #2e7d32;
        }
        
        .negative {
            color: #c62828;
        }
        
        .disclaimer {
            background-color: #fff8e1;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin-top: 30px;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #e0eaff;
            margin-top: 30px;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .input-section {
                border-right: none;
                border-bottom: 1px solid #e0eaff;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Predictor de Supervivencia en el Titanic</h1>
            <p class="subtitle">Introduce las características de un pasajero para predecir si habría sobrevivido al hundimiento del Titanic, basado en un modelo probabilístico entrenado con datos reales.</p>
        </header>
        
        <div class="content">
            <div class="input-section">
                <h2>Datos del Pasajero</h2>
                <p>Completa la información para realizar la predicción:</p>
                
                <div class="form-group">
                    <label for="pclass">Clase del Pasajero</label>
                    <select id="pclass">
                        <option value="1">Primera Clase</option>
                        <option value="2">Segunda Clase</option>
                        <option value="3" selected>Tercera Clase</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="sex">Sexo</label>
                    <select id="sex">
                        <option value="female">Femenino</option>
                        <option value="male" selected>Masculino</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="age">Edad (años)</label>
                    <div class="slider-container">
                        <input type="range" id="age" min="0" max="80" value="30" step="1">
                        <span class="slider-value" id="ageValue">30</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="fare">Tarifa Pagada ($0 a $300)</label>
                    <div class="slider-container">
                        <input type="range" id="fare" min="0" max="300" value="32" step="1">
                        <span class="slider-value" id="fareValue">32</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="sibsp">Número de Hermanos/Esposos a bordo</label>
                    <select id="sibsp">
                        <option value="0" selected>0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3 o más</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="parch">Número de Padres/Hijos a bordo</label>
                    <select id="parch">
                        <option value="0" selected>0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3 o más</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="embarked">Puerto de Embarque</label>
                    <select id="embarked">
                        <option value="S" selected>Southampton (S)</option>
                        <option value="C">Cherburgo (C)</option>
                        <option value="Q">Queenstown (Q)</option>
                    </select>
                </div>
                
                <button id="predictBtn">Predecir Supervivencia</button>
                <button id="randomBtn" style="background: linear-gradient(to right, #6a11cb, #2575fc); margin-top: 15px;">Generar Pasajero Aleatorio</button>
            </div>
            
            <div class="results-section">
                <h2>Resultado de la Predicción</h2>
                <p>La probabilidad de supervivencia se calculará en base a los datos proporcionados:</p>
                
                <div id="resultContainer" class="result-box">
                    <p>Introduce los datos del pasajero y haz clic en "Predecir Supervivencia"</p>
                </div>
                
                <div class="factors">
                    <h3>Factores que Afectan la Supervivencia</h3>
                    <div id="factorsList">
                        <p>Los factores se mostrarán después de realizar una predicción.</p>
                    </div>
                </div>
                
                <div class="disclaimer">
                    <p><strong>Nota:</strong> Este modelo predictivo está basado en análisis estadístico del dataset real del Titanic. La predicción tiene un margen de error y solo tiene fines educativos.</p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Modelo Predictivo del Titanic | Basado en el dataset histórico de pasajeros del RMS Titanic</p>
            <p>© 2023 - Propósito educativo</p>
        </footer>
    </div>

    <script>
        // Actualizar valores de los sliders
        document.getElementById('age').addEventListener('input', function() {
            document.getElementById('ageValue').textContent = this.value;
        });
        
        document.getElementById('fare').addEventListener('input', function() {
            document.getElementById('fareValue').textContent = this.value;
        });
        
        // Función para calcular la probabilidad de supervivencia
        function calculateSurvivalProbability(passenger) {
            // Modelo probabilístico basado en estadísticas del dataset del Titanic
            let probability = 0.5; // Probabilidad base
            
            // Factor: Clase del pasajero
            let classFactor = 0;
            if (passenger.pclass === 1) classFactor = 0.4;
            else if (passenger.pclass === 2) classFactor = 0.1;
            else classFactor = -0.3;
            
            // Factor: Sexo
            let sexFactor = passenger.sex === 'female' ? 0.5 : -0.3;
            
            // Factor: Edad
            let ageFactor = 0;
            if (passenger.age < 16) ageFactor = 0.2; // Los niños tenían mayor prioridad
            else if (passenger.age > 50) ageFactor = -0.1; // Los mayores tenían menor tasa de supervivencia
            else ageFactor = 0; // Adultos jóvenes y de mediana edad
            
            // Factor: Tarifa
            let fareFactor = Math.min(passenger.fare / 100, 0.3); // Mayor tarifa = mayor probabilidad
            
            // Factor: Familiares a bordo
            let familyFactor = (passenger.sibsp + passenger.parch) > 0 ? 0.1 : -0.05;
            
            // Factor: Puerto de embarque
            let embarkedFactor = 0;
            if (passenger.embarked === 'C') embarkedFactor = 0.05; // Cherburgo tenía mayor tasa
            else if (passenger.embarked === 'Q') embarkedFactor = -0.05; // Queenstown tenía menor tasa
            
            // Calcular probabilidad total
            probability += classFactor + sexFactor + ageFactor + fareFactor + familyFactor + embarkedFactor;
            
            // Asegurar que la probabilidad esté entre 0 y 1
            probability = Math.max(0.05, Math.min(0.95, probability));
            
            // Devolver factores individuales para mostrar
            return {
                probability: probability,
                factors: [
                    { name: "Clase del Pasajero", impact: classFactor, value: getClassName(passenger.pclass) },
                    { name: "Sexo", impact: sexFactor, value: passenger.sex === 'female' ? "Femenino" : "Masculino" },
                    { name: "Edad", impact: ageFactor, value: passenger.age + " años" },
                    { name: "Tarifa Pagada", impact: fareFactor, value: "$" + passenger.fare },
                    { name: "Familiares a Bordo", impact: familyFactor, value: (passenger.sibsp + passenger.parch) + " personas" },
                    { name: "Puerto de Embarque", impact: embarkedFactor, value: getEmbarkedName(passenger.embarked) }
                ]
            };
        }
        
        // Funciones auxiliares
        function getClassName(pclass) {
            if (pclass == 1) return "Primera Clase";
            if (pclass == 2) return "Segunda Clase";
            return "Tercera Clase";
        }
        
        function getEmbarkedName(embarked) {
            if (embarked === 'C') return "Cherburgo";
            if (embarked === 'Q') return "Queenstown";
            return "Southampton";
        }
        
        // Función para mostrar resultados
        function showPrediction(passenger) {
            const result = calculateSurvivalProbability(passenger);
            const probability = result.probability;
            const survived = probability > 0.5;
            const percentage = (probability * 100).toFixed(1);
            
            // Determinar nivel de confianza
            let confidence = "";
            if (probability > 0.7 || probability < 0.3) {
                confidence = "Alta confianza en la predicción.";
            } else if (probability > 0.6 || probability < 0.4) {
                confidence = "Moderada confianza en la predicción.";
            } else {
                confidence = "Baja confianza en la predicción (cerca del 50%).";
            }
            
            // Crear HTML para el resultado
            let resultHTML = `
                <div class="result-title">${survived ? '✅ SOBREVIVIRÍA' : '❌ NO SOBREVIVIRÍA'}</div>
                <div class="probability">${percentage}%</div>
                <p>Probabilidad de supervivencia estimada</p>
                <div class="confidence">${confidence}</div>
            `;
            
            // Aplicar clase CSS según resultado
            const resultContainer = document.getElementById('resultContainer');
            resultContainer.className = survived ? 'result-box survived' : 'result-box not-survived';
            resultContainer.innerHTML = resultHTML;
            
            // Mostrar factores
            let factorsHTML = '';
            result.factors.forEach(factor => {
                const impactPercent = (factor.impact * 100).toFixed(1);
                const impactClass = factor.impact > 0 ? 'positive' : 'negative';
                const impactSign = factor.impact > 0 ? '+' : '';
                
                factorsHTML += `
                    <div class="factor">
                        <div class="factor-name">${factor.name}</div>
                        <div class="factor-value">${factor.value}</div>
                        <div class="factor-impact ${impactClass}">${impactSign}${impactPercent}%</div>
                    </div>
                `;
            });
            
            document.getElementById('factorsList').innerHTML = factorsHTML;
        }
        
        // Función para generar un pasajero aleatorio
        function generateRandomPassenger() {
            const pclass = Math.floor(Math.random() * 3) + 1;
            const sex = Math.random() > 0.5 ? 'male' : 'female';
            const age = Math.floor(Math.random() * 70) + 5;
            
            // Tarifa basada en clase
            let fare;
            if (pclass === 1) fare = Math.floor(Math.random() * 200) + 50;
            else if (pclass === 2) fare = Math.floor(Math.random() * 40) + 15;
            else fare = Math.floor(Math.random() * 30) + 5;
            
            const sibsp = Math.floor(Math.random() * 4);
            const parch = Math.floor(Math.random() * 4);
            
            const embarkedOptions = ['S', 'C', 'Q'];
            const embarked = embarkedOptions[Math.floor(Math.random() * 3)];
            
            return {
                pclass: pclass,
                sex: sex,
                age: age,
                fare: fare,
                sibsp: sibsp,
                parch: parch,
                embarked: embarked
            };
        }
        
        // Función para cargar datos aleatorios en el formulario
        function loadRandomPassenger() {
            const passenger = generateRandomPassenger();
            
            document.getElementById('pclass').value = passenger.pclass;
            document.getElementById('sex').value = passenger.sex;
            document.getElementById('age').value = passenger.age;
            document.getElementById('ageValue').textContent = passenger.age;
            document.getElementById('fare').value = passenger.fare;
            document.getElementById('fareValue').textContent = passenger.fare;
            document.getElementById('sibsp').value = Math.min(passenger.sibsp, 3);
            document.getElementById('parch').value = Math.min(passenger.parch, 3);
            document.getElementById('embarked').value = passenger.embarked;
            
            // Mostrar predicción automáticamente
            showPrediction(passenger);
        }
        
        // Event Listeners
        document.getElementById('predictBtn').addEventListener('click', function() {
            // Obtener datos del formulario
            const passenger = {
                pclass: parseInt(document.getElementById('pclass').value),
                sex: document.getElementById('sex').value,
                age: parseInt(document.getElementById('age').value),
                fare: parseInt(document.getElementById('fare').value),
                sibsp: parseInt(document.getElementById('sibsp').value),
                parch: parseInt(document.getElementById('parch').value),
                embarked: document.getElementById('embarked').value
            };
            
            showPrediction(passenger);
        });
        
        document.getElementById('randomBtn').addEventListener('click', loadRandomPassenger);
        
        // Inicializar con un pasajero aleatorio
        window.addEventListener('load', function() {
            loadRandomPassenger();
        });
    </script>
</body>
</html>
